<!DOCTYPE html>
<html>
  <head>
    <title>VSB</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <link rel="shortcut icon" href="code.ico">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script src="index.js" type="text/javascript" ></script>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about.html">About</a></li>
      </ul>
      <ul>
        <li id="lg"><a href="/login.html">log in</a></li>
        <li id="su"><a href="/signup.html">sign up</a></li>
      </ul>
    </nav>
    <div class="container">
      <div class="blurb">
        <h2>Welcome to VSB - Very Simple Blog</h2>
        <p>
          This is my blog page in github io platform. <a href="/about.html">Read more about me...</a>
        </p>

      </div>
      <p>New post here</p>
      <ol id="list-note"></ol>
      <!-- /.blurb -->
    </div>
    <!-- /.container -->
    <footer>
      <ul>
        <li><a href="mailto:longn7284@gmail.com">email</a></li>
        <li><a href="https://github.com/longhubk">longhubk</a></li>
      </ul>
    </footer>
    <script type="text/javascript">
      const lg = document.getElementById('lg');
      const su = document.getElementById('su');
      (async () => {
        const isLogin = await checkIsLogin();
        console.log('res Is Login: ', isLogin);
        if (isLogin) {
          lg.innerHTML = `<a href='/note.manager.html' style="margin-right: 1rem">${isLogin}</a> <a href="#" onclick='return logout()'>Log Out</a>` ;
          su.innerHTML = '';
        } 
      })();

    (async () => {
      const ln = document.getElementById('list-note');
      const listNote = await getListNote();
      // console.log('listNote', listNote);
      for (const note of listNote) {
        const li = document.createElement('li')
        li.setAttribute('class', "note-item")
        li.innerHTML = `
          <a class="note-tit" href='/note.list.html?noteId=${note._id}'>${note.title}</a>
          `;
        ln.append(li);
      }
    })()
    </script>
  </body>
</html>
